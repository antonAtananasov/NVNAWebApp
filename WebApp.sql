-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: localhost
-- Generation Time: Jun 10, 2024 at 12:13 AM
-- Server version: 10.4.32-MariaDB
-- PHP Version: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `WebApp`
--

-- --------------------------------------------------------

--
-- Table structure for table `documents`
--

CREATE TABLE `documents` (
  `uuid` char(36) NOT NULL,
  `owner_uuid` char(36) NOT NULL,
  `name` varchar(255) NOT NULL,
  `format` varchar(255) DEFAULT NULL,
  `content` blob DEFAULT NULL,
  `root_document_uuid` char(36) DEFAULT NULL,
  `is_folder` tinyint(1) NOT NULL DEFAULT 0,
  `creation_date` timestamp NOT NULL DEFAULT current_timestamp(),
  `last_modified_date` timestamp NOT NULL DEFAULT current_timestamp(),
  `last_accessed_date` timestamp NOT NULL DEFAULT current_timestamp(),
  `size` float NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `documents`
--

INSERT INTO `documents` (`uuid`, `owner_uuid`, `name`, `format`, `content`, `root_document_uuid`, `is_folder`, `creation_date`, `last_modified_date`, `last_accessed_date`, `size`) VALUES
('2f17d5b9-26a7-11ef-b2b0-b48c9d01efa1', '27b8dc7a-d14b-4236-90ad-e8e382078d3e', 'doc1', 'txt', 0x6c6f7765724c657474657273203d20226162636465666768696a6b6c6d6e6f707172737475767778797a220a646967697473203d202230313233343536373839220a7370656369616c43686172616374657273203d20225f4024213f25220a0a0a64656620636865636b506173737764287061737377643a2073747229202d3e20626f6f6c3a0a2020202076616c6964203d20547275650a2020202023206c656e67746820206174206c6561737420382073796d626f6c730a2020202076616c696420263d206c656e2870617373776429203e3d20380a202020202320696e636c756465206c6f77657263617365206c6574746572730a2020202076616c696420263d20616e79285b6c657474657220696e2070617373776420666f72206c657474657220696e206c6f7765724c6574746572735d290a202020202320696e636c75646520616e2075707065722063617365206c65747465720a2020202076616c696420263d20616e79285b6c65747465722e7570706572282920696e2070617373776420666f72206c657474657220696e206c6f7765724c6574746572735d290a202020202320696e636c75646520612064696769740a2020202076616c696420263d20616e79285b646967697420696e2070617373776420666f7220646967697420696e206469676974735d290a2020202023207370656369616c206368617261637465720a2020202076616c696420263d20616e79285b6368617220696e2070617373776420666f72206368617220696e207370656369616c436861726163746572735d290a20202020232072657175697265206e6f2073706163650a2020202076616c696420263d206e6f742022202220696e207061737377640a0a2020202072657475726e2076616c69640a0a0a707764203d20225040726f6c61303121220a0a6966205f5f6e616d655f5f203d3d20225f5f6d61696e5f5f223a0a20202020707764203d20696e7075742822456e7465722050617373776f72643a2022290a2020202070776476616c6964203d20636865636b50617373776428707764290a0a202020206d657373616765203d20280a2020202020202020225468652070617373776f72642069732076616c69642e220a202020202020202069662070776476616c69640a2020202020202020656c736520225468652070617373776f726420646f6573206e6f74206d656574207468652063726974657269612e220a20202020290a202020207072696e74286d657373616765290a, NULL, 0, '2024-06-10', '2024-06-10', '2024-06-10', 0),
('2f17de62-26a7-11ef-b2b0-b48c9d01efa1', '27b8dc7a-d14b-4236-90ad-e8e382078d3e', 'doc2', 'txt', 0x696d706f72742072616e646f6d0a0a72616e676573203d205b28312c20313939292c20283230302c20333939292c20283430302c20353939292c20283630302c20373939292c20283830302c2031303030295d0a0a6e756d62657273203d205b0a2020202035332c0a20202020372c0a2020202035362c0a202020203138302c0a202020203435302c0a202020203932302c0a2020202031322c0a20202020372c0a202020203135302c0a202020203235302c0a202020203638302c0a20202020322c0a202020203630302c0a202020203230302c0a202020203830302c0a202020203739392c0a202020203139392c0a2020202034362c0a202020203132382c0a2020202036352c0a5d0a0a0a6465662072616e646f6d4e756d73286e3a20696e7429202d3e206c6973743a0a2020202072657475726e205b72616e646f6d2e72616e64696e7428312c20313030302920666f72206920696e2072616e6765286e295d0a0a0a6465662070657263656e74696c6546756e63286e756d626572733a206c6973742c2072616e6765733a206c697374203d2072616e676573293a0a2020202070657263656e74696c65203d205b305d202a206c656e2872616e676573290a0a20202020666f72206920696e2072616e6765286c656e2872616e67657329293a0a20202020202020206d696e2c206d6178203d2072616e6765735b695d0a2020202020202020666f72206e756d20696e206e756d626572733a0a2020202020202020202020206966206e756d203e3d206d696e20616e64206e756d203c3d206d61783a0a2020202020202020202020202020202070657263656e74696c655b695d202b3d20313030202f206c656e286e756d62657273290a2020202072657475726e2070657263656e74696c650a0a0a6966205f5f6e616d655f5f203d3d20225f5f6d61696e5f5f223a0a2020202023206e203d20696e7428696e70757428224e756d626572206f6620696e7465676572733a202229290a2020202023206e756d62657273203d2072616e646f6d4e756d73286e290a2020202070657263656e74696c6573203d2070657263656e74696c6546756e63286e756d62657273290a20202020666f72206920696e2072616e6765286c656e2870657263656e74696c657329293a0a20202020202020207072696e74286622707b692b317d3a207b70657263656e74696c65735b695d7d2522290a, NULL, 0, '2024-06-10', '2024-06-10', '2024-06-10', 0),
('5fec0925-26a7-11ef-b2b0-b48c9d01efa1', '27b8dc7a-d14b-4236-90ad-e8e382078d3e', 'folder1', NULL, NULL, NULL, 1, '2024-06-10', '2024-06-10', '2024-06-10', 0),
('81fb3174-26a7-11ef-b2b0-b48c9d01efa1', '27b8dc7a-d14b-4236-90ad-e8e382078d3e', 'childDoc1', 'txt', 0x696d706f72742074696d650a0a0a6465662074696d6572287365636f6e64733a20666c6f61742c207265736f6c7574696f6e3d3229202d3e204e6f6e653a0a20202020737461727454696d65203d2074696d652e74696d6528290a20202020656e6454696d65203d20737461727454696d65202b20740a202020207768696c652074696d652e74696d652829203c20656e6454696d653a0a20202020202020207072696e7428656e6454696d65202d2074696d652e74696d652829290a202020202020202074696d652e736c656570283130202a2a20282d7265736f6c7574696f6e29290a202020207072696e742822446f6e6522290a0a0a6966205f5f6e616d655f5f203d3d20225f5f6d61696e5f5f223a0a2020202074203d20666c6f617428696e707574282254696d6572207365636f6e64733a202229290a2020202074696d65722874290a, '5fec0925-26a7-11ef-b2b0-b48c9d01efa1', 0, '2024-06-10', '2024-06-10', '2024-06-10', 0),
('9e619818-26a7-11ef-b2b0-b48c9d01efa1', '48e696a3-7113-4fe1-8468-bbd9552648e8', 'doc222', 'txt', 0x6c6f7765724c657474657273203d20226162636465666768696a6b6c6d6e6f707172737475767778797a220a646967697473203d202230313233343536373839220a7370656369616c43686172616374657273203d20225f4024213f25220a0a0a64656620636865636b506173737764287061737377643a2073747229202d3e20626f6f6c3a0a2020202076616c6964203d20547275650a2020202023206c656e67746820206174206c6561737420382073796d626f6c730a2020202076616c696420263d206c656e2870617373776429203e3d20380a202020202320696e636c756465206c6f77657263617365206c6574746572730a2020202076616c696420263d20616e79285b6c657474657220696e2070617373776420666f72206c657474657220696e206c6f7765724c6574746572735d290a202020202320696e636c75646520616e2075707065722063617365206c65747465720a2020202076616c696420263d20616e79285b6c65747465722e7570706572282920696e2070617373776420666f72206c657474657220696e206c6f7765724c6574746572735d290a202020202320696e636c75646520612064696769740a2020202076616c696420263d20616e79285b646967697420696e2070617373776420666f7220646967697420696e206469676974735d290a2020202023207370656369616c206368617261637465720a2020202076616c696420263d20616e79285b6368617220696e2070617373776420666f72206368617220696e207370656369616c436861726163746572735d290a20202020232072657175697265206e6f2073706163650a2020202076616c696420263d206e6f742022202220696e207061737377640a0a2020202072657475726e2076616c69640a0a0a707764203d20225040726f6c61303121220a0a6966205f5f6e616d655f5f203d3d20225f5f6d61696e5f5f223a0a20202020707764203d20696e7075742822456e7465722050617373776f72643a2022290a2020202070776476616c6964203d20636865636b50617373776428707764290a0a202020206d657373616765203d20280a2020202020202020225468652070617373776f72642069732076616c69642e220a202020202020202069662070776476616c69640a2020202020202020656c736520225468652070617373776f726420646f6573206e6f74206d656574207468652063726974657269612e220a20202020290a202020207072696e74286d657373616765290a, NULL, 0, '2024-06-10', '2024-06-10', '2024-06-10', 0);

-- --------------------------------------------------------

--
-- Table structure for table `plans`
--

CREATE TABLE `plans` (
  `id` int(11) NOT NULL,
  `storage` float NOT NULL,
  `cost` float NOT NULL,
  `plan_name` char(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `plans`
--

INSERT INTO `plans` (`id`, `storage`, `cost`, `plan_name`) VALUES
(0, 100, 0, 'Default Plan'),
(1, 500, 2, 'Plan Mini'),
(2, 2000, 6, 'Plan Medium'),
(3, 10000, 25, 'Plan Max');

-- --------------------------------------------------------

--
-- Table structure for table `shared_documents`
--

CREATE TABLE `shared_documents` (
  `shared_document_id` int(11) NOT NULL,
  `document_uuid` char(36) NOT NULL,
  `user_uuid` char(36) NOT NULL,
  `permission` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `shared_documents`
--

INSERT INTO `shared_documents` (`shared_document_id`, `document_uuid`, `user_uuid`, `permission`) VALUES
(1, '2f17d5b9-26a7-11ef-b2b0-b48c9d01efa1', '48e696a3-7113-4fe1-8468-bbd9552648e8', 'read');

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE `users` (
  `uuid` char(36) NOT NULL,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `creation_date` timestamp NOT NULL DEFAULT current_timestamp(),
  `plan_id` int(11) NOT NULL DEFAULT 0,
  `plan_start_date` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`uuid`, `username`, `password`, `creation_date`, `plan_id`, `plan_start_date`) VALUES
('27b8dc7a-d14b-4236-90ad-e8e382078d3e', 'testAuth', '$2b$10$1LoB6qhbGOcrwRbACHoGpubi5n.sBHt0npwORyS8KSHAiU5ev/Pwq', '2024-06-10', 0, '2024-06-10'),
('48e696a3-7113-4fe1-8468-bbd9552648e8', 'testAuth1', '$2b$10$1Xn4ALVodK.44z/AOoXNV.G6jBW0KCJ5rEzU5PrFjiLkLi6xfeX3K', '2024-06-10', 0, '2024-06-10'),
('869d342e-a199-42bb-a0fa-3fc03e086ee0', 'testAuth2', '$2b$10$SrpZuyu/f/yyDYP3FfMJwOwqzBk42EUh6pgXH0gkWFOGtGCizWUzO', '2024-06-10', 0, '2024-06-10');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `documents`
--
ALTER TABLE `documents`
  ADD PRIMARY KEY (`uuid`),
  ADD KEY `documents_ibfk_1` (`owner_uuid`),
  ADD KEY `documents_ibfk_2` (`root_document_uuid`);

--
-- Indexes for table `plans`
--
ALTER TABLE `plans`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `shared_documents`
--
ALTER TABLE `shared_documents`
  ADD PRIMARY KEY (`shared_document_id`) USING BTREE,
  ADD KEY `shared_documents_ibfk_1` (`user_uuid`),
  ADD KEY `shared_documents_ibfk_2` (`document_uuid`);

--
-- Indexes for table `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`uuid`),
  ADD KEY `users_ibfk_1` (`plan_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `plans`
--
ALTER TABLE `plans`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT for table `shared_documents`
--
ALTER TABLE `shared_documents`
  MODIFY `shared_document_id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `documents`
--
ALTER TABLE `documents`
  ADD CONSTRAINT `documents_ibfk_1` FOREIGN KEY (`owner_uuid`) REFERENCES `users` (`uuid`),
  ADD CONSTRAINT `documents_ibfk_2` FOREIGN KEY (`root_document_uuid`) REFERENCES `documents` (`uuid`);

--
-- Constraints for table `shared_documents`
--
ALTER TABLE `shared_documents`
  ADD CONSTRAINT `shared_documents_ibfk_1` FOREIGN KEY (`user_uuid`) REFERENCES `users` (`uuid`),
  ADD CONSTRAINT `shared_documents_ibfk_2` FOREIGN KEY (`document_uuid`) REFERENCES `documents` (`uuid`);

--
-- Constraints for table `users`
--
ALTER TABLE `users`
  ADD CONSTRAINT `users_ibfk_1` FOREIGN KEY (`plan_id`) REFERENCES `plans` (`id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;